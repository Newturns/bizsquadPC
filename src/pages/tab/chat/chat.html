<ion-content no-padding class="content-color">
    <ion-segment [(ngModel)]="defaultSegment">
        <ion-segment-button value="chatRoom">
            Chat Room
        </ion-segment-button>
        <ion-segment-button value="squadChatRoom">
            Squad Chatroom
        </ion-segment-button>
    </ion-segment>
    <ion-scroll class="scrollable" scrollY="true">
        <div [ngSwitch]="defaultSegment">
            <!-- 1:1채팅 폼 -->
            <ion-list class="marginB56" *ngSwitchCase="'chatRoom'" scrollY="true">
                <ion-item class="chat-item listBorder" no-lines *ngFor="let room of chatRooms" (click)="gotoRoom(room)">
                    <ion-avatar item-start *ngIf="room.test.data.photoURL != null">
                        <img src="{{ room.test.data.photoURL }}">
                    </ion-avatar>
                    <ion-avatar class="notPhoto" item-start *ngIf="room.test.data.photoURL == null">
                        <span class="displayName">
                            {{ room.test.data.displayName | slice:0:2 }}
                        </span>
                    </ion-avatar>
                    <h2>{{ room.test.data.displayName }}
                        <ion-icon class="chat-count" name="person"> {{ room.data.member_count }}</ion-icon>
                    </h2>
                    <p class="chat-message">{{ room.data.lastMessage | slice:0:35}}</p><p class="chat-time">{{ room.data.lastMessageTime * 1000 | date: 'HH:mm MM/dd' }}</p>
                </ion-item>
            </ion-list>


            <!-- 스쿼드 채팅 폼 -->
            <ion-list class="marginB56" *ngSwitchCase="'squadChatRoom'" scrollY="true">
                <ion-item class="chat-item listBorder" *ngFor="let room of squadChatRooms" (click)="gotoSquadRoom(room)">
                    <h2 class="squadRoomName">{{ room.data.name | slice:0:25 }}</h2>
                    <ion-icon class="squadMemberCount" name="person"> {{room.data.member_count}}</ion-icon> 
                    <ng-container *ngIf="room.data.lastMessage != null">
                        <p class="chat-message">{{ room.data.lastMessage | slice:0:35 }}</p>
                        <p class="chat-time">{{ room.data.lastMessageTime * 1000 | date: 'HH:mm MM/dd' }}</p>
                    </ng-container>
                    <ng-container *ngIf="room.data.lastMessage == null">
                        <p class="chat-message">There are no messages.</p>
                    </ng-container>
                </ion-item>
            </ion-list>
        </div>
    </ion-scroll>
</ion-content>